<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Adding GNU/Linux hosts · Elkarbackup Docs</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="In our example, we want to backup the _**/var/www**_ folder from a GNU/Linux client that has the 192.168.1.2 IP address."/><meta name="docsearch:version" content="2.0"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Adding GNU/Linux hosts · Elkarbackup Docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.elkarbackup.org/index.html"/><meta property="og:description" content="In our example, we want to backup the _**/var/www**_ folder from a GNU/Linux client that has the 192.168.1.2 IP address."/><meta property="og:image" content="https://docs.elkarbackup.org/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docs.elkarbackup.org/img/docusaurus.png"/><link rel="shortcut icon" href="/undefined"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-3914088-13', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript" src="/js/elkarbackup.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">Elkarbackup Docs</h2></a><a href="/versions.html"><h3>2.0</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/installation.html" target="_self">Installation</a></li><li class="siteNavGroupActive"><a href="/docs/introduction.html" target="_self">Documentation</a></li><li class="siteNavGroupActive"><a href="/docs/troubleshooting.html" target="_self">Troubleshooting</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Clients and jobs</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/introduction.html">What is it?</a></li><li class="navListItem"><a class="navItem" href="/docs/why-elkarbackup.html">Why Elkarbackup?</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Installation</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/installation.html">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started.html">Getting started</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Clients and jobs</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/clients-jobs.html">Clients and jobs</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/hosts-linux.html">Linux hosts</a></li><li class="navListItem"><a class="navItem" href="/docs/hosts-windows.html">Windows hosts</a></li><li class="navListItem"><a class="navItem" href="/docs/advanced-connection-options.html">Advanced connection options</a></li><li class="navListItem"><a class="navItem" href="/docs/hosts-solving-problems.html">Solving problems</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Backup status</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/backup-status.html">Backup status</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Backup policies</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/policies-new.html">Adding policies</a></li><li class="navListItem"><a class="navItem" href="/docs/policies-schedule.html">Schedule</a></li><li class="navListItem"><a class="navItem" href="/docs/policies-outdated-data.html">Outdated data</a></li><li class="navListItem"><a class="navItem" href="/docs/policies-different.html">Using different policies</a></li><li class="navListItem"><a class="navItem" href="/docs/sort-jobs.html">Sort Jobs</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Scripts</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/script-intro.html">Scripts</a></li><li class="navListItem"><a class="navItem" href="/docs/script-new.html">Creating a new script</a></li><li class="navListItem"><a class="navItem" href="/docs/script-example.html">Script example</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Settings</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/manage-parameters.html">Manage parameters</a></li><li class="navListItem"><a class="navItem" href="/docs/storages.html">Backup storages</a></li><li class="navListItem"><a class="navItem" href="/docs/storage-nfs.html">NFS storage</a></li><li class="navListItem"><a class="navItem" href="/docs/backup-mirror.html">Backup mirror</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">A review of concepts</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/concepts-rsnapshot.html">Rsnapshot</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Troubleshooting</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/troubleshooting.html">Troubleshooting</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/elkarbackup/elkarbackup-docs/edit/master/docs/hosts-linux.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Adding GNU/Linux hosts</h1></header><article><div><span><p>In our example, we want to backup the <em><strong>/var/www</strong></em> folder from a GNU/Linux client that has the 192.168.1.2 IP address.</p>
<h2><a class="anchor" aria-hidden="true" id="add-the-client"></a><a href="#add-the-client" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add the client</h2>
<p>In order to add a new client, we have to click on the <em><strong>Add Client</strong></em> button, and we will face a self-documented form where we will enter the client data.</p>
<p>In our example,</p>
<ul>
<li><p>Name: <em>My Linux Client</em></p></li>
<li><p>URL: root@192.168.1.2</p></li>
</ul>
<p>Once we have enter this data, we will click on the <em><strong>Save</strong></em> button and we will see the new client in the main page.<br>
<img src="/docs/assets/screenshots/clients_tasks_03.png" alt=""></p>
<p>As this has to be an automated proccess, our server needs to use the correct credentials to connect to <em>&quot;My Linux Client&quot;</em>, but we haven't given this information in the client configuration. As long as we are using the SSH protocol, we will use the public/private key pair.</p>
<p>We can download the Elkarbackup server public key from the <em><strong>Configuration menu --&gt; Manage parameters</strong></em>.</p>
<p><img src="/docs/assets/screenshots/clients_jobs_04.png" alt=""></p>
<p><details>
<summary>An alternative way to download the public key</summary>
You can also dowload the public key directly into your client using the CLI with <code>curl</code> or <code>wget</code>:</p>
<pre><code class="hljs css language-sh">curl -k https://&lt;elkarbackup-server-address&gt;/config/publickey/get
</code></pre>
<p></details></p>
<p>Now, we have to configure this public key in the GNU/Linux client. Once it is done, we will be able to automatice the ssh connections needed for the backup proccess. In this backup connections, we have two roles:</p>
<ul>
<li>ElkarBackup <em><strong>Server</strong></em>: It has the <em><strong>client</strong></em> role in the connection.</li>
<li>GNU/Linux <em><strong>Client</strong></em>: It has the <em><strong>server</strong></em> role in the ssh connection, so it is neccesary to install there the openssh-server package if it is not previosly installed.</li>
</ul>
<p>Now we will issue this command in order to copy the newly downloaded public key in the client.</p>
<blockquote>
<p>ssh-copy-id -i <a href="http://Publickey.pub">Publickey.pub</a> root@192.168.1.2</p>
</blockquote>
<p>Take into account that we are using the <em><strong>root</strong></em> user in the client machine. As you could imagine, you need to know the root's password in the client machine.</p>
<p>If you don't have a linux machine to issue this command, you can do it from a console in the Elkarbackup server. In this case, you can issue the command using the path where the public key is stored:</p>
<blockquote>
<p>root@elkarbackup:~# ssh-copy-id -i /var/lib/elkarbackup/.ssh/id_<a href="http://rsa.pub">rsa.pub</a> root@192.168.1.2</p>
</blockquote>
<p>Another package that we need in the GNU/Linux client is <em><strong>rsync</strong></em>, so if it isn't installed, we can install it with this command:</p>
<blockquote>
<p>root@LinuxClient:~# apt-get install rsync</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="add-the-job"></a><a href="#add-the-job" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add the job</h2>
<p>The next step is to create the job. As we have said before, we want to backup the <em><strong>/var/www</strong></em> folder, so we click in the <em><strong>Add job</strong></em> button <strong>(+)</strong></p>
<p><img src="/docs/assets/screenshots/clients_jobs_05.png" alt=""></p>
<p>We will receive a self-documented form where it is explained which data we have to fill. In our example, we will change only this fields:</p>
<ul>
<li><strong>Name</strong>: www</li>
<li><strong>Path</strong>: /var/www</li>
<li><strong>Description</strong>: Apache Web Server Folders</li>
<li><strong>Policy</strong>: Default policy</li>
</ul>
<p>Just click on <em><strong>Save</strong></em> and the task will be listed in the main page as shown in the following screenshot</p>
<p><img src="/docs/assets/screenshots/clients_tasks_04.png" alt=""></p>
<p>As you noticed, the <em><strong>Last log entry</strong></em> and <em><strong>Last Result</strong></em> columns don't show anything yet. Sooner than later, you will noticed that in these columns we will see the last execution timestamp and it's state.</p>
<p>But when? It depends on its <em><strong>Policy</strong></em> configuration. We have assigned the <em><strong>Default Policy</strong></em> to this job, so if we see how it is configurated we could see which are it's <em><strong>schedule</strong></em> and <em><strong>retention policy</strong></em>.</p>
<p>To better understand the concept of policies, it is convenient to have a clear understanding of the concepts explained in the section <em><strong>&quot;A review of concepts: Rsnapshot&quot;</strong></em>, since it is the logic used in our application. In the end we will go deeper into this part.</p>
<p>If we let the time (in this example some days) to make the first copies and then we click on the <em><strong>Restore</strong></em>  <img src="/docs/assets/screenshots/restore.png" alt="">  button we will see the result</p>
<p><img src="/docs/assets/screenshots/clients-jobs8.png" alt=""></p>
<p>As we can see the folder **Daily.0 **contains the data of the last copy, but we have also more folders containing backups made in previous days. If we go into any of them we can get to the concrete file that we are interested in recovering. We can download a single file or a compressed folder with many files inside.</p>
<p>In the <em><strong>Advanced options</strong></em> section you can customize also some parameters related to the ssh and rsync connections, as the ssh connection port, bandwith used in the connection, etc.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/clients-jobs.html"><span class="arrow-prev">← </span><span>Clients and jobs</span></a><a class="docs-next button" href="/docs/hosts-windows.html"><span>Windows hosts</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#add-the-client">Add the client</a></li><li><a href="#add-the-job">Add the job</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"></a><div><h5>Documentation</h5><a href="/docs/en/getting-started.html">Getting Started</a><a href="/docs/en/installation.html">Installation</a><a href="/docs/en/troubleshooting.html">Troubleshooting</a></div><div><h5>Community</h5><a href="http://stackoverflow.com/questions/tagged/elkarbackup" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://crowdin.com/project/elkarbackup">Translate</a><a href="https://twitter.com/elkarbackup/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="https://www.elkarbackup.org">Website</a><a href="https://github.com/elkarbackup/elkarbackup">GitHub</a><a class="github-button" href="https://github.com/elkarbackup/elkarbackup" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2021 ElkarBackup</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '7f2bf4bca0a9b06c05b54d12e953811d',
                indexName: 'elkarbackup',
                inputSelector: '#search_input_react'
              });
            </script></body></html>